name: xgb_env
channels:
  - conda-forge
  - defaults
dependencies:
  # --- BASE SYSTEM ---
  - python=3.10
  - pip

  # --- DATA CORE (Optimizado en Conda por velocidad/C++) ---
  # Restricción <2.0.0 es CRÍTICA para compatibilidad con PyCaret y Numba
  - numpy<2.0.0  
  - pandas<2.0.0
  - pyarrow      # PyArrow 22.0 no existe aún (actual es ~17/18), dejamos que Conda elija la mejor.
  - pyreadstat   # Mejor en Conda para evitar compilar librerías C de lectura SPSS.

  # --- VISUALIZATION & DEV ---
  - matplotlib
  - seaborn
  - jupyter
  - ipykernel
  - ruff
  - black
  - pre-commit
  
  # --- PIP DEPENDENCIES ---
  # Usamos Pip para versiones exactas o librerías que no están bien en Conda
  - pip:
    # --- UTILS (Requeridos por tu lista) ---
    - greenlet==3.2.4
    - playwright==1.55.0  # Requiere correr 'playwright install' después
    - pyee==13.0.0
    - typing_extensions==4.15.0
    - joblib==1.2.0
    - papermill
    
    # --- ML CORE (Versiones Pinneadas) ---
    # Scikit-learn pinneado aquí para obedecer tu requirement exacto
    - scikit-learn==1.3.2 
    # XGBoost 3.1.2 no existe (actual es ~2.1). Dejamos sin versión para bajar la última estable.
    - xgboost 
    
    # --- SHAP & EXPLAINABILITY ---
    # Numba y llvmlite son muy sensibles, mejor que Pip gestione la cadena de Shap
    - llvmlite==0.42.0
    - numba==0.59.0
    - shap==0.48.0
    - fairlearn
    - sweetviz

    # --- WEB APP & API ---
    - fastapi
    - uvicorn
    - pydantic
    - streamlit
    - streamlit-shap==1.0.2

    # --- AUTOML ---
    # PyCaret siempre al final para que resuelva conflictos con lo anterior
    - pycaret>=3.0.0